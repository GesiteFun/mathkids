<!DOCTYPE html><html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Genius Challenge</title>
    <style>
        /* Styles remain unchanged */
        /* ...[skipping unchanged CSS for brevity]... */
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Math Genius Challenge</h1><div class="stats">
        <div class="stat-box">
            <div class="stat-label">Score</div>
            <div class="stat-value" id="score">0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Time</div>
            <div class="stat-value" id="time">60</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">High Score</div>
            <div class="stat-value" id="high-score">0</div>
        </div>
    </div>

    <div class="problem" id="problem">
        12 + 23 = ?
    </div>

    <div class="options" id="options"></div>

    <div class="controls">
        <button id="start-btn">Start Game</button>
        <button id="reset-btn">Reset</button>
    </div>

    <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.7;">&copy; 2025 fawwazdzaky | Math Genius</p>
</div>

<script>
    const problemElement = document.getElementById('problem');
    const optionsContainer = document.getElementById('options');
    const scoreElement = document.getElementById('score');
    const timeElement = document.getElementById('time');
    const highScoreElement = document.getElementById('high-score');
    const startBtn = document.getElementById('start-btn');
    const resetBtn = document.getElementById('reset-btn');

    let score = 0;
    let timeLeft = 60;
    let highScore = localStorage.getItem('mathHighScore') || 0;
    let timer;
    let currentProblem = {};
    let gameActive = false;

    const operations = [
        { symbol: '+', method: (a, b) => a + b },
        { symbol: '-', method: (a, b) => a - b },
        { symbol: '×', method: (a, b) => a * b },
        { symbol: '÷', method: (a, b) => a / b },
        { symbol: '^', method: (a, b) => Math.pow(a, b) },
        { symbol: '%', method: (a, b) => a % b }
    ];

    highScoreElement.textContent = highScore;

    function generateProblem() {
        const operation = operations[Math.floor(Math.random() * operations.length)];
        let a, b, answer;

        switch(operation.symbol) {
            case '+':
                a = Math.floor(Math.random() * 100) + 50;
                b = Math.floor(Math.random() * 100) + 50;
                break;
            case '-':
                a = Math.floor(Math.random() * 150) + 50;
                b = Math.floor(Math.random() * 100);
                break;
            case '×':
                a = Math.floor(Math.random() * 20) + 10;
                b = Math.floor(Math.random() * 15) + 5;
                break;
            case '÷':
                b = Math.floor(Math.random() * 15) + 2;
                a = b * (Math.floor(Math.random() * 15) + 2);
                break;
            case '^':
                a = Math.floor(Math.random() * 5) + 2;
                b = Math.floor(Math.random() * 3) + 2;
                break;
            case '%':
                a = Math.floor(Math.random() * 100) + 50;
                b = Math.floor(Math.random() * 25) + 2;
                break;
        }

        answer = operation.method(a, b);
        if (operation.symbol === '÷') answer = Math.round(answer);

        currentProblem = {
            a: a,
            b: b,
            operation: operation.symbol,
            answer: answer,
            options: generateOptions(answer)
        };

        problemElement.textContent = `${a} ${operation.symbol} ${b} = ?`;
        renderOptions();
    }

    function generateOptions(correctAnswer) {
        const options = [correctAnswer];

        while (options.length < 4) {
            let offset = Math.floor(Math.random() * 15) + 1;
            let option = Math.random() > 0.5 ? correctAnswer + offset : correctAnswer - offset;

            if (!options.includes(option)) options.push(option);
        }

        return shuffleArray(options);
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function renderOptions() {
        optionsContainer.innerHTML = '';

        currentProblem.options.forEach(option => {
            const button = document.createElement('button');
            button.className = 'option';
            button.textContent = option;
            button.onclick = () => checkAnswer(option);
            optionsContainer.appendChild(button);
        });
    }

    function checkAnswer(selectedAnswer) {
        if (!gameActive) return;

        const options = document.querySelectorAll('.option');

        options.forEach(option => {
            option.disabled = true;
            const val = parseFloat(option.textContent);
            if (val === currentProblem.answer) {
                option.classList.add('correct');
            } else if (val === selectedAnswer) {
                option.classList.add('wrong');
            }
        });

        if (selectedAnswer === currentProblem.answer) {
            score++;
            scoreElement.textContent = score;
            timeLeft = Math.min(60, timeLeft + 2);
        } else {
            score = Math.max(0, score - 1);
            timeLeft = Math.max(5, timeLeft - 5);
        }

        timeElement.textContent = timeLeft;
        setTimeout(generateProblem, 1000);
    }

    function startGame() {
        if (gameActive) return;

        gameActive = true;
        score = 0;
        timeLeft = 60;
        scoreElement.textContent = score;
        timeElement.textContent = timeLeft;
        startBtn.disabled = true;

        generateProblem();

        timer = setInterval(() => {
            timeLeft--;
            timeElement.textContent = timeLeft;

            if (timeLeft <= 0) endGame();
        }, 1000);
    }

    function endGame() {
        clearInterval(timer);
        gameActive = false;
        startBtn.disabled = false;

        if (score > highScore) {
            highScore = score;
            highScoreElement.textContent = highScore;
            localStorage.setItem('mathHighScore', highScore);
        }

        problemElement.textContent = `${currentProblem.a} ${currentProblem.operation} ${currentProblem.b} = ${currentProblem.answer}`;
    }

    function resetGame() {
        clearInterval(timer);
        gameActive = false;
        score = 0;
        timeLeft = 60;
        scoreElement.textContent = score;
        timeElement.textContent = timeLeft;
        startBtn.disabled = false;
        problemElement.textContent = "Ready to play?";
        optionsContainer.innerHTML = '';
    }

    startBtn.addEventListener('click', startGame);
    resetBtn.addEventListener('click', resetGame);
</script>

</body>
</html>